# 🤖 AI智能终端助手 - 交互式版本

一个带有对话记忆功能的智能终端控制助手，可以通过自然语言与你对话并执行终端命令。

## ✨ 主要功能

### 1. 🎯 自然语言终端控制
- 用自然语言描述你想做什么，AI自动转换为终端命令
- 例如："显示当前路径" → 自动执行 `pwd`

### 2. 📝 文件创建和代码执行
- 一句话创建代码文件并执行
- 例如："创建一个Python文件hello.py，打印Hello World，然后运行它"

### 3. 🧠 对话记忆功能
- **记住上下文**：可以引用之前的对话
- **命令历史**：记录所有执行过的命令
- **智能理解**：理解"刚才"、"之前"等时间词

### 4. 💬 智能问答
- 回答关于编程、系统等问题
- 结合之前的对话历史提供更准确的答案

## 🚀 快速开始

### 运行程序

```bash
python3 terminal_agent_interactive.py
```

### 示例对话

```
👤 你: 显示当前目录的所有Python文件
🤖 助手: ✅ 命令执行成功
命令: ls *.py
输出:
hello.py
test.py
...

👤 你: 创建一个Python文件test.py，计算1到100的和，然后执行
🤖 助手: ✅ 多步骤任务执行结果:
📄 创建文件: test.py
✅ 命令 1: python3 test.py
输出:
5050

👤 你: 刚才创建的文件内容是什么？
🤖 助手: 刚才创建的 test.py 文件内容是计算1到100的和...
```

## 🎮 特殊命令

| 命令 | 功能 |
|------|------|
| `exit` 或 `quit` | 退出程序 |
| `clear` | 清空对话历史 |
| `history` | 查看对话历史 |
| `commands` | 查看命令执行历史 |

## 📚 使用场景

### 场景1：开发辅助
```
👤 你: 查看Python版本
👤 你: 安装requests库
👤 你: 创建一个测试HTTP请求的脚本
```

### 场景2：文件管理
```
👤 你: 列出所有大于1MB的文件
👤 你: 显示当前目录结构
👤 你: 创建一个备份脚本
```

### 场景3：代码学习
```
👤 你: 创建一个Python文件，演示装饰器的用法
👤 你: 执行这个文件
👤 你: 解释一下刚才代码的原理
```

## 🔒 安全特性

- **危险命令拦截**：自动阻止 `rm -rf`、`sudo rm` 等危险命令
- **超时保护**：命令执行超过10秒自动终止
- **异常处理**：完善的错误处理机制

## 🎯 记忆功能详解

### 对话历史记忆
- 保存最近10轮对话
- 可以引用之前的内容
- 支持上下文理解

### 命令历史记忆
- 记录最近20条命令
- 显示执行时间和状态
- 帮助AI做出更好的决策

### 示例：利用记忆

```
👤 你: 创建一个Python文件hello.py
🤖 助手: ✅ 文件创建成功

👤 你: 执行它
🤖 助手: [AI理解"它"指的是刚才创建的hello.py]

👤 你: 刚才执行的结果是什么？
🤖 助手: [AI回忆之前的执行输出]
```

## 🛠️ 技术特性

- **基于 LangGraph**：复杂工作流编排
- **LLM驱动**：使用Kimi API进行自然语言理解
- **状态管理**：完整的对话状态追踪
- **模块化设计**：清晰的节点和路由结构

## 📊 工作流程

```
用户输入 → 意图分析 → 分支处理
                      ├─ 单步命令 → 生成命令 → 执行 → 返回结果
                      ├─ 多步任务 → 规划 → 创建文件 → 执行 → 返回结果
                      └─ 问答 → 生成回答（带上下文）→ 返回结果
```

## 🎨 界面说明

- `👤 你:` - 用户输入提示符
- `🤖 助手:` - AI响应
- `✅` - 成功状态
- `❌` - 失败状态
- `📄` - 文件操作
- `─────` - 分隔线

## 💡 提示与技巧

1. **描述要清晰**：尽量详细描述你想做什么
2. **利用记忆**：可以说"刚才的"、"之前的"来引用历史
3. **分步骤**：复杂任务可以分多次对话完成
4. **查看历史**：遇到问题时使用 `history` 和 `commands` 查看

## 🐛 常见问题

**Q: AI理解错误怎么办？**
A: 可以换一种说法重新描述，或者直接说出命令

**Q: 如何清空记忆？**
A: 输入 `clear` 命令清空对话历史

**Q: 命令执行失败？**
A: 检查命令是否正确，可以输入 `commands` 查看执行历史

## 🔄 版本对比

| 特性 | Demo版本 | 交互式版本 |
|------|---------|----------|
| 对话模式 | ❌ 批量测试 | ✅ 实时交互 |
| 记忆功能 | ❌ 无记忆 | ✅ 对话+命令历史 |
| 上下文理解 | ❌ 单次处理 | ✅ 理解上下文 |
| 用户体验 | 演示用 | 实际使用 |

## 📝 配置说明

在文件开头修改LLM配置：

```python
LLM_CONFIG = {
    "model": "your-model",
    "base_url": "your-api-url",
    "api_key": "your-api-key",
    "temperature": 0,
}
```

## 🚧 限制说明

- 命令执行超时限制：10秒
- 对话历史保留：最近10轮
- 命令历史保留：最近20条
- 工作目录：当前example目录

## 🎓 学习价值

这个项目展示了：
- ✅ LangGraph状态图的使用
- ✅ 对话记忆的实现
- ✅ 条件路由和工作流编排
- ✅ LLM与系统工具的集成
- ✅ 自然语言到代码的转换

---

**享受与AI助手的对话吧！** 🎉
