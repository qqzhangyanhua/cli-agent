# 📁 交互式文件选择器使用指南

## 🎯 功能概述

AI智能体现在支持**超级友好的交互式文件选择器**！只需输入 `@` 就能启动可视化文件浏览器，让文件选择变得直观高效。

## 🚀 快速开始

### 1. 启动文件选择器
```bash
./ai-agent
👤 你: @
```

系统会立即显示交互式文件选择界面：

```
📁 交互式文件选择器
============================================================
📂 当前目录: /path/to/your/project
📄 第 1/3 页 (共 42 个文件)
------------------------------------------------------------
   1. 📁 src                           目录
   2. 🐍 agent_config.py               2.8K
   3. 🐍 agent_nodes.py               15.2K
   4. 📝 README.md                     4.1K
   5. 📋 package.json                  1.2K
   6. 🎨 style.css                     856B
   7. 🟨 main.js                       3.4K
   8. 🖼️ logo.png                      12K
   9. 📦 archive.zip                   2.1M
  10. 🔧 build.sh                      445B
  11. 📄 notes.txt                     234B
  12. 📕 manual.pdf                    1.8M
  13. 🎬 demo.mp4                      15M
  14. 🎵 sound.mp3                     3.2M
  15. ⚙️ setup.exe                     8.9M
------------------------------------------------------------
💡 操作提示:
  • 输入数字选择文件
  • 输入文件名进行搜索
  • 'n' 下一页, 'p' 上一页
  • 'r' 刷新, 'h' 显示隐藏文件
  • 'q' 或 'exit' 退出选择
------------------------------------------------------------

👤 请选择 (输入数字/搜索/命令): 
```

### 2. 快速搜索模式
```bash
👤 你: @readme
```

系统会显示匹配的文件列表：

```
🔍 找到 3 个匹配 'readme' 的文件:
--------------------------------------------------
  1. 📝 README.md
  2. 📝 README_CN.md  
  3. 📝 project_readme.txt
--------------------------------------------------
👤 选择文件 (输入数字或按 Enter 进入完整选择器): 1
✅ 已选择: 📝 README.md
```

## 🎮 交互操作指南

### 基本选择操作
| 输入 | 功能 |
|------|------|
| `1-15` | 选择对应编号的文件 |
| `文件名` | 搜索匹配的文件 |
| `Enter` | 确认选择或进入完整选择器 |

### 导航命令
| 命令 | 功能 |
|------|------|
| `n` | 下一页 |
| `p` | 上一页 |
| `r` | 刷新文件列表 |
| `h` | 显示/隐藏隐藏文件 |
| `q` / `exit` | 退出选择器 |

### 智能搜索
- **精确匹配优先**: 输入完整文件名会优先显示
- **开头匹配**: 以搜索词开头的文件排在前面
- **包含匹配**: 文件名包含搜索词的文件也会显示
- **高亮显示**: 匹配的文本会用颜色高亮

## 📝 文件图标说明

| 图标 | 文件类型 | 示例 |
|------|----------|------|
| 📁 | 目录 | `src/`, `docs/` |
| 🐍 | Python文件 | `*.py` |
| 🟨 | JavaScript文件 | `*.js` |
| 🔷 | TypeScript文件 | `*.ts` |
| 🌐 | HTML文件 | `*.html` |
| 🎨 | CSS文件 | `*.css` |
| 📋 | JSON文件 | `*.json` |
| 📝 | Markdown文件 | `*.md` |
| 📄 | 文本文件 | `*.txt` |
| 🖼️ | 图片文件 | `*.png`, `*.jpg` |
| 🎬 | 视频文件 | `*.mp4`, `*.avi` |
| 🎵 | 音频文件 | `*.mp3`, `*.wav` |
| 📦 | 压缩文件 | `*.zip`, `*.tar` |
| ⚙️ | 可执行文件 | `*.exe`, `*.app` |
| 🔧 | 脚本文件 | `*.sh`, `*.bat` |

## 🎯 使用场景示例

### 场景1: 浏览项目文件
```bash
👤 你: @
# 启动文件选择器，浏览所有文件
👤 选择: 3
# 选择 agent_nodes.py
✅ 已选择文件: @agent_nodes.py
👤 你 (已选择 @agent_nodes.py): 分析这个文件的结构
```

### 场景2: 快速查找配置文件
```bash
👤 你: @config
# 快速搜索包含'config'的文件
🔍 找到 4 个匹配 'config' 的文件:
  1. 🐍 agent_config.py
  2. 📋 mcp_config.json
  3. 📋 package.json
  4. 📝 CONFIG.md
👤 选择: 1
✅ 已选择: 🐍 agent_config.py
👤 对 @agent_config.py 要做什么? 查看API配置
```

### 场景3: 编辑特定文件
```bash
👤 你: @
# 进入文件选择器
👤 搜索: main
# 搜索包含'main'的文件
👤 选择: 2
✅ 已选择: 🐍 main.py
👤 你 (已选择 @main.py): 添加错误处理逻辑
```

### 场景4: 比较多个文件
```bash
👤 你: 比较 @old_config.py 和 @new_config.py 的差异
# 系统会自动处理两个文件引用
```

## 💡 高级技巧

### 1. 单个匹配自动确认
当搜索结果只有一个文件时，系统会询问是否直接选择：
```bash
👤 搜索: agent_config
💡 找到唯一匹配: 🐍 agent_config.py，是否选择? (y/N): y
✅ 已选择: 🐍 agent_config.py
```

### 2. 分页浏览大目录
对于包含大量文件的目录：
- 每页显示15个文件
- 使用 `n`/`p` 进行翻页
- 页面顶部显示当前页数和总页数

### 3. 隐藏文件显示
按 `h` 可以切换显示/隐藏以 `.` 开头的隐藏文件：
```bash
👤 命令: h
# 现在会显示 .env, .gitignore 等隐藏文件
```

### 4. 实时搜索过滤
输入搜索词后，文件列表会实时过滤：
```bash
👤 搜索: test
🔍 过滤条件: 'test' (找到 5 个匹配)
  1. 🐍 test_demo.py
  2. 🐍 test_utils.py
  3. 📄 test_data.txt
```

## 🔧 自定义配置

### 修改每页显示数量
在 `interactive_file_selector.py` 中：
```python
self.files_per_page = 20  # 默认15，可以调整
```

### 修改搜索深度
```python
self.max_search_depth = 5  # 默认3层，可以增加
```

### 添加新的文件图标
在 `_get_file_icon` 方法中添加：
```python
icon_map = {
    '.vue': '💚',
    '.go': '🐹', 
    '.rust': '🦀',
    # 添加更多...
}
```

## 🚀 性能优化

- **缓存机制**: 文件列表会缓存，避免重复扫描
- **延迟加载**: 大目录分页显示，减少内存占用
- **智能排序**: 匹配度高的文件优先显示
- **快速响应**: 本地操作，无网络延迟

## 🎉 总结

交互式文件选择器让文件操作变得：
- **🎯 直观**: 可视化界面，一目了然
- **⚡ 快速**: 数字选择，搜索过滤
- **🔍 智能**: 模糊匹配，自动建议
- **🎨 美观**: 文件图标，颜色高亮
- **🛠️ 灵活**: 多种操作方式，适应不同需求

现在就试试输入 `@` 体验全新的文件选择方式吧！🎊
