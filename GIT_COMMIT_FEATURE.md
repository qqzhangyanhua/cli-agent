# ğŸ¯ Git Commitæ¶ˆæ¯ç”ŸæˆåŠŸèƒ½

## âœ… åŠŸèƒ½è¯´æ˜

AI Agentæ–°å¢äº†**æ™ºèƒ½Git Commitæ¶ˆæ¯ç”Ÿæˆ**åŠŸèƒ½ï¼åªéœ€ä¸€å¥è¯ï¼Œå°±èƒ½è‡ªåŠ¨åˆ†æä»£ç å˜æ›´å¹¶ç”Ÿæˆä¸“ä¸šçš„commitæ¶ˆæ¯ã€‚

---

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### æ–¹å¼1: äº¤äº’æ¨¡å¼

```bash
ai-agent

ğŸ‘¤ ä½ : ç”Ÿæˆcommitæ—¥å¿—
```

### æ–¹å¼2: å•æ¬¡æ‰§è¡Œ

```bash
ai-agent "ç”Ÿæˆcommitæ—¥å¿—"
ai-agent "ç”Ÿæˆcommitæ¶ˆæ¯"
ai-agent "å¸®æˆ‘å†™commit"
```

---

## ğŸ’¡ å·¥ä½œåŸç†

### æ‰§è¡Œæµç¨‹

```
ç”¨æˆ·è¾“å…¥ "ç”Ÿæˆcommitæ—¥å¿—"
    â†“
æ„å›¾è¯†åˆ« (intent_analyzer)
    â†“ git_commit
Gitå˜æ›´åˆ†æ (git_commit_generator)
    â”œâ”€ æ£€æŸ¥Gitä»“åº“
    â”œâ”€ è·å–git status
    â”œâ”€ è·å–git diff (staged/unstaged)
    â”œâ”€ è·å–æœ€è¿‘commits
    â””â”€ åˆ†æå˜æ›´æ–‡ä»¶
    â†“
LLMç”Ÿæˆcommitæ¶ˆæ¯
    â”œâ”€ ä½¿ç”¨claude-3-5-sonnet
    â”œâ”€ å‚è€ƒConventional Commitsè§„èŒƒ
    â””â”€ å‚è€ƒå†å²commité£æ ¼
    â†“
è¿”å›æ ¼å¼åŒ–çš„commitæ¶ˆæ¯
```

### åˆ†æå†…å®¹

1. **GitçŠ¶æ€** - å·¥ä½œåŒºæ˜¯å¦æœ‰å˜æ›´
2. **å·²æš‚å­˜diff** - `git diff --cached`
3. **æœªæš‚å­˜diff** - `git diff`
4. **å˜æ›´æ–‡ä»¶åˆ—è¡¨** - å—å½±å“çš„æ–‡ä»¶
5. **å†å²commits** - æœ€è¿‘5æ¡commitï¼ˆå‚è€ƒé£æ ¼ï¼‰

---

## ğŸ“ ç”Ÿæˆçš„Commitæ¶ˆæ¯æ ¼å¼

éµå¾ª **Conventional Commits** è§„èŒƒï¼š

```
<type>: <subject>

<body>ï¼ˆå¯é€‰ï¼‰
```

### Typeç±»å‹

- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤Bug
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- `refactor`: é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»º/å·¥å…·å˜æ›´

### ç¤ºä¾‹

```
feat: æ·»åŠ Git commitæ¶ˆæ¯è‡ªåŠ¨ç”ŸæˆåŠŸèƒ½

- åˆ›å»ºgit_tools.pyæ¨¡å—
- å®ç°diffåˆ†æå’Œcommitå†å²è·å–
- é›†æˆåˆ°AI Agentå·¥ä½œæµ
- æ”¯æŒstagedå’Œunstagedå˜æ›´åˆ†æ
```

---

## ğŸ¨ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: åŸºæœ¬ä½¿ç”¨

```bash
$ ai-agent "ç”Ÿæˆcommitæ—¥å¿—"

[æ„å›¾åˆ†æ] ç”Ÿæˆcommitæ—¥å¿—...
           ä½¿ç”¨æ¨¡å‹: kimi-k2-0905-preview
           æ„å›¾: git_commit
[Gitåˆ†æ] åˆ†æä»£ç å˜æ›´...
[Gitåˆ†æ] âœ… åˆ†æå®Œæˆ
[Gitåˆ†æ] å·²æš‚å­˜ 3 ä¸ªæ–‡ä»¶
[Gitåˆ†æ] å˜æ›´æ–‡ä»¶: 3 ä¸ª
[Commitç”Ÿæˆ] ä½¿ç”¨æ¨¡å‹: claude-3-5-sonnet
[Commitç”Ÿæˆ] âœ… ç”Ÿæˆå®Œæˆ

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ Git Commitæ¶ˆæ¯ç”Ÿæˆå®Œæˆ

============================================================
feat: æ·»åŠ Git commitæ¶ˆæ¯è‡ªåŠ¨ç”ŸæˆåŠŸèƒ½

åˆ›å»ºgit_tools.pyæ¨¡å—å®ç°Gitä»“åº“åˆ†æï¼ŒåŒ…æ‹¬çŠ¶æ€æ£€æŸ¥ã€diffè·å–
å’Œcommitå†å²æŸ¥è¯¢ã€‚é›†æˆåˆ°AI Agentå·¥ä½œæµï¼Œæ”¯æŒè‡ªåŠ¨ç”Ÿæˆç¬¦åˆ
Conventional Commitsè§„èŒƒçš„commitæ¶ˆæ¯ã€‚
============================================================

ğŸ“Š å˜æ›´æ‘˜è¦:
  â€¢ å˜æ›´æ–‡ä»¶: 3 ä¸ª
  â€¢ ä¸»è¦æ–‡ä»¶:
    - git_tools.py
    - agent_nodes.py
    - agent_workflow.py

ğŸ’¡ ä½¿ç”¨æ–¹æ³•:
  git commit -m "feat: æ·»åŠ Git commitæ¶ˆæ¯è‡ªåŠ¨ç”ŸæˆåŠŸèƒ½"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

### ç¤ºä¾‹2: æœ‰æœªæš‚å­˜å˜æ›´

```bash
$ ai-agent "ç”Ÿæˆcommitæ¶ˆæ¯"

ğŸ“ Git Commitæ¶ˆæ¯ç”Ÿæˆå®Œæˆ

============================================================
refactor: ä¼˜åŒ–ä»£ç ç»“æ„å’Œé”™è¯¯å¤„ç†

é‡æ„git_toolsæ¨¡å—ï¼Œæ”¹è¿›å¼‚å¸¸å¤„ç†é€»è¾‘ï¼Œæ·»åŠ è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ã€‚
ä¼˜åŒ–diffè·å–æ€§èƒ½ï¼Œå‡å°‘ä¸å¿…è¦çš„gitå‘½ä»¤è°ƒç”¨ã€‚
============================================================

ğŸ“Š å˜æ›´æ‘˜è¦:
  â€¢ å˜æ›´æ–‡ä»¶: 1 ä¸ª
  â€¢ ä¸»è¦æ–‡ä»¶:
    - git_tools.py

ğŸ’¡ ä½¿ç”¨æ–¹æ³•:
  git add .  # å…ˆæš‚å­˜å˜æ›´
  git commit -m "refactor: ä¼˜åŒ–ä»£ç ç»“æ„å’Œé”™è¯¯å¤„ç†"
```

### ç¤ºä¾‹3: å·¥ä½œåŒºå¹²å‡€

```bash
$ ai-agent "ç”Ÿæˆcommitæ—¥å¿—"

âš ï¸ å·¥ä½œåŒºæ²¡æœ‰å˜æ›´ï¼Œæ— éœ€ç”Ÿæˆcommitæ¶ˆæ¯
```

### ç¤ºä¾‹4: ä¸æ˜¯Gitä»“åº“

```bash
$ cd /tmp/not-a-repo
$ ai-agent "ç”Ÿæˆcommitæ¶ˆæ¯"

âŒ å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“
```

---

## ğŸ”§ æŠ€æœ¯å®ç°

### æ–°å¢æ–‡ä»¶

| æ–‡ä»¶ | å¤§å° | åŠŸèƒ½ |
|------|------|------|
| **git_tools.py** | ~10KB | Gitæ“ä½œå·¥å…·ç±» |

### ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|---------|
| **agent_nodes.py** | æ–°å¢ `git_commit_generator()` èŠ‚ç‚¹ |
| **agent_workflow.py** | æ·»åŠ Git commitè·¯ç”± |
| **agent_config.py** | æ‰©å±•AgentStateæ”¯æŒgit_commit |

### æ ¸å¿ƒç±»: GitTools

```python
from git_tools import git_tools

# æ£€æŸ¥Gitä»“åº“
git_tools.check_git_repo()

# è·å–GitçŠ¶æ€
git_tools.get_git_status()

# è·å–diff
git_tools.get_git_diff(staged=True)  # å·²æš‚å­˜
git_tools.get_git_diff(staged=False) # æœªæš‚å­˜

# è·å–æœ€è¿‘commits
git_tools.get_recent_commits(5)

# åˆ†ææ‰€æœ‰å˜æ›´
git_tools.analyze_changes()
```

---

## ğŸ¯ æ”¯æŒçš„è§¦å‘è¯

AIä¼šè‡ªåŠ¨è¯†åˆ«ä»¥ä¸‹è¾“å…¥ï¼š

- "ç”Ÿæˆcommitæ—¥å¿—"
- "ç”Ÿæˆcommitæ¶ˆæ¯"
- "å†™commit"
- "å¸®æˆ‘å†™commit"
- "ç”Ÿæˆgit commit"
- "è‡ªåŠ¨ç”Ÿæˆcommit"

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. åœ¨æäº¤å‰ä½¿ç”¨

```bash
# ä¿®æ”¹ä»£ç ...
git add .

# ç”Ÿæˆcommitæ¶ˆæ¯
ai-agent "ç”Ÿæˆcommitæ—¥å¿—"

# å¤åˆ¶ç”Ÿæˆçš„æ¶ˆæ¯æäº¤
git commit -m "feat: ..."
```

### 2. é…åˆgit addä½¿ç”¨

```bash
# åªæš‚å­˜éƒ¨åˆ†æ–‡ä»¶
git add file1.py file2.py

# ä¸ºè¿™äº›æ–‡ä»¶ç”Ÿæˆcommit
ai-agent "ç”Ÿæˆcommitæ¶ˆæ¯"
```

### 3. å‚è€ƒå†å²é£æ ¼

AIä¼šè‡ªåŠ¨åˆ†æä½ æœ€è¿‘çš„commité£æ ¼ï¼Œä¿æŒä¸€è‡´æ€§ã€‚

---

## ğŸ”’ å®‰å…¨è¯´æ˜

### åªè¯»æ“ä½œ

Git commitç”ŸæˆåŠŸèƒ½**åªæ‰§è¡Œè¯»å–æ“ä½œ**ï¼š

- âœ… `git status` - è·å–çŠ¶æ€
- âœ… `git diff` - è·å–å˜æ›´
- âœ… `git log` - è·å–å†å²
- âŒ ä¸ä¼šæ‰§è¡Œä»»ä½•å†™å…¥æ“ä½œ
- âŒ ä¸ä¼šè‡ªåŠ¨commit
- âŒ ä¸ä¼šä¿®æ”¹å·¥ä½œåŒº

### æ‰‹åŠ¨æ§åˆ¶

- ç”Ÿæˆçš„æ¶ˆæ¯ä»…ä¾›å‚è€ƒ
- ä½ å¯ä»¥ä¿®æ”¹åå†ä½¿ç”¨
- å®Œå…¨ç”±ä½ æ§åˆ¶ä½•æ—¶commit

---

## â“ å¸¸è§é—®é¢˜

### Q: æ”¯æŒå“ªäº›Gitæ“ä½œï¼Ÿ
**A:** ç›®å‰åªæ”¯æŒç”Ÿæˆcommitæ¶ˆæ¯ã€‚ä¸æ”¯æŒè‡ªåŠ¨commitã€pushç­‰æ“ä½œã€‚

### Q: ç”Ÿæˆçš„æ¶ˆæ¯å¯ä»¥ä¿®æ”¹å—ï¼Ÿ
**A:** å½“ç„¶ï¼AIç”Ÿæˆçš„æ¶ˆæ¯ä»…ä¾›å‚è€ƒï¼Œä½ å¯ä»¥è‡ªç”±ä¿®æ”¹ã€‚

### Q: å¯¹diffå¤§å°æœ‰é™åˆ¶å—ï¼Ÿ
**A:** ä¸ºä¿æŠ¤LLM tokenï¼Œdiffå†…å®¹ä¼šæˆªæ–­åˆ°4000å­—ç¬¦ã€‚ä½†ä¼šåˆ†ææ‰€æœ‰å˜æ›´æ–‡ä»¶ã€‚

### Q: æ”¯æŒå¤šè¯­è¨€commitæ¶ˆæ¯å—ï¼Ÿ
**A:** ç›®å‰é»˜è®¤ç”Ÿæˆä¸­æ–‡æ¶ˆæ¯ã€‚å¦‚éœ€å…¶ä»–è¯­è¨€ï¼Œå¯ä»¥åœ¨æç¤ºä¸­è¯´æ˜ã€‚

### Q: å¦‚ä½•è‡ªå®šä¹‰commité£æ ¼ï¼Ÿ
**A:** AIä¼šè‡ªåŠ¨å‚è€ƒä½ çš„å†å²commité£æ ¼ã€‚ä½ ä¹Ÿå¯ä»¥ä¿®æ”¹ç”Ÿæˆçš„æ¶ˆæ¯ã€‚

---

## ğŸš€ æœªæ¥è®¡åˆ’

- [ ] æ”¯æŒè‡ªå®šä¹‰commitæ¨¡æ¿
- [ ] æ”¯æŒè‹±æ–‡commitæ¶ˆæ¯
- [ ] æ”¯æŒç”Ÿæˆè¯¦ç»†çš„commit body
- [ ] æ”¯æŒåˆ†æç‰¹å®šæ–‡ä»¶çš„å˜æ›´
- [ ] æ”¯æŒç”Ÿæˆchangelog

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Conventional Commitsè§„èŒƒ](https://www.conventionalcommits.org/)
- [Gitæœ€ä½³å®è·µ](https://git-scm.com/book/zh/v2)

---

## âœ… æ€»ç»“

### åŠŸèƒ½äº®ç‚¹

âœ… **æ™ºèƒ½åˆ†æ** - è‡ªåŠ¨åˆ†æä»£ç å˜æ›´  
âœ… **è§„èŒƒæ ¼å¼** - éµå¾ªConventional Commits  
âœ… **é£æ ¼ä¸€è‡´** - å‚è€ƒå†å²commité£æ ¼  
âœ… **å®‰å…¨å¯é ** - åªè¯»æ“ä½œï¼Œä¸ä¿®æ”¹ä»“åº“  
âœ… **ä½¿ç”¨ç®€å•** - ä¸€å¥è¯ç”Ÿæˆä¸“ä¸šcommit  

### ä½¿ç”¨åœºæ™¯

- ğŸ“ å¿«é€Ÿç”Ÿæˆè§„èŒƒçš„commitæ¶ˆæ¯
- ğŸ¯ ä¿æŒå›¢é˜Ÿcommité£æ ¼ä¸€è‡´
- ğŸ’¡ å­¦ä¹ å¦‚ä½•å†™å¥½çš„commitæ¶ˆæ¯
- â±ï¸ èŠ‚çœæ€è€ƒcommitæªè¾çš„æ—¶é—´

---

**ç«‹å³ä½“éªŒï¼š**

```bash
ai-agent "ç”Ÿæˆcommitæ—¥å¿—"
```

ğŸ‰ äº«å—AIå¸¦æ¥çš„ä¾¿åˆ©ï¼
